<!DOCTYPE html>


<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>Basic HTTP Caching &mdash; Varnish Wiki  documentation</title>
    
    <link rel="stylesheet" href="../_static/basic.css" type="text/css" />
    <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootswatch-3.3.6/cosmo/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="../_static/bootstrap-sphinx.css" type="text/css" />
    
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../',
        VERSION:     '',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '.html',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../_static/jquery.js"></script>
    <script type="text/javascript" src="../_static/underscore.js"></script>
    <script type="text/javascript" src="../_static/doctools.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-1.11.0.min.js"></script>
    <script type="text/javascript" src="../_static/js/jquery-fix.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-3.3.6/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../_static/bootstrap-sphinx.js"></script>
    <link rel="top" title="Varnish Wiki  documentation" href="../index.html" />
    <link rel="up" title="Getting Started" href="index.html" />
    <link rel="next" title="Web caching Terminologies" href="webTerms.html" />
    <link rel="prev" title="Understanding a Typical Website Architecture" href="website_arch.html" />
<meta charset='utf-8'>
<meta http-equiv='X-UA-Compatible' content='IE=edge,chrome=1'>
<meta name='viewport' content='width=device-width, initial-scale=1.0, maximum-scale=1'>
<meta name="apple-mobile-web-app-capable" content="yes">

  </head>
  <body role="document">

  <div id="navbar" class="navbar navbar-default navbar-fixed-top">
    <div class="container">
      <div class="navbar-header">
        <!-- .btn-navbar is used as the toggle for collapsed navbar content -->
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".nav-collapse">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand" href="../index.html">
          Varnish Wiki</a>
        <span class="navbar-text navbar-version pull-left"><b></b></span>
      </div>

        <div class="collapse navbar-collapse nav-collapse">
          <ul class="nav navbar-nav">
            
                <li><a href="https://varnish-software.com">Varnish Website</a></li>
            
            
              <li class="dropdown globaltoc-container">
  <a role="button"
     id="dLabelGlobalToc"
     data-toggle="dropdown"
     data-target="#"
     href="../index.html">Menu <b class="caret"></b></a>
  <ul class="dropdown-menu globaltoc"
      role="menu"
      aria-labelledby="dLabelGlobalToc"><ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting Started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Varnish Web Developer&#8217;s FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/varnish/index.html">How to Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/wordpress/index.html">WordPress with Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/magento2/index.html">Magento2 with Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/drupal/index.html">Drupal with Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/aem.html">Adobe Experience Manager and Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/expressionEngine.html">Expression Engine and Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/sitecoreCMS.html">Sitecore CMS and Varnish</a></li>
</ul>
</ul>
</li>
              
            
            
              
                
  <li>
    <a href="website_arch.html" title="Previous Chapter: Understanding a Typical Website Architecture"><span class="glyphicon glyphicon-chevron-left visible-sm"></span><span class="hidden-sm hidden-tablet">&laquo; Understanding...</span>
    </a>
  </li>
  <li>
    <a href="webTerms.html" title="Next Chapter: Web caching Terminologies"><span class="glyphicon glyphicon-chevron-right visible-sm"></span><span class="hidden-sm hidden-tablet">Web caching T... &raquo;</span>
    </a>
  </li>
              
            
            
            
            
          </ul>

          
            
<form class="navbar-form navbar-right" action="../search.html" method="get">
 <div class="form-group">
  <input type="text" name="q" class="form-control" placeholder="Search" />
 </div>
  <input type="hidden" name="check_keywords" value="yes" />
  <input type="hidden" name="area" value="default" />
</form>
          
        </div>
    </div>
  </div>

<div class="container">
  <div class="row">
      <div class="col-md-3">
        <div id="sidebar" class="bs-sidenav" role="complementary"><div class="container">
    <div class="row">
      <div class="col-md-3" width="18%">
<!---        <div class="sidebar">
</div>
          <div calss="container">  --->
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <h3>Contents</h3>
    <div class="sidebar-localtoc">
      <ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Getting Started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="your_varnish_goals.html">What do you want to achieve with Varnish?</a></li>
<li class="toctree-l2"><a class="reference internal" href="website_arch.html">Understanding a Typical Website Architecture</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">Basic HTTP Caching</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#caching-terminologies">Caching Terminologies</a></li>
<li class="toctree-l3"><a class="reference internal" href="#what-is-web-caching">What is Web Caching?</a></li>
<li class="toctree-l3"><a class="reference internal" href="#defining-cache-control-policy">Defining Cache-control Policy</a></li>
<li class="toctree-l3"><a class="reference internal" href="#cache-related-headers">Cache Related Headers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#cache-hit-and-misses">Cache-hit and misses</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#impact-of-cache-related-headers-on-caching">Impact of Cache Related headers on Caching</a></li>
<li class="toctree-l3"><a class="reference internal" href="#your-caching-checklist">Your Caching Checklist</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="webTerms.html">Web caching Terminologies</a></li>
<li class="toctree-l2"><a class="reference internal" href="webTerms.html#varnish-three-letter-acronyms">Varnish Three Letter Acronyms</a></li>
<li class="toctree-l2"><a class="reference internal" href="general_resources.html">Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#installing-and-configuring-varnish">Installing and Configuring Varnish</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#step-by-step-configuring-for-web-applications">Step by Step Configuring for Web Applications</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#configuring-for-enterprise-products">Configuring for Enterprise Products</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#configuring-vcl-beyond-the-default">Configuring VCL Beyond the default</a></li>
<li class="toctree-l2"><a class="reference internal" href="index.html#recipes-for-cache-invalidation">Recipes for Cache Invalidation</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../faq/index.html">Varnish Web Developer&#8217;s FAQ</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/varnish/index.html">How to Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/wordpress/index.html">WordPress with Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/magento2/index.html">Magento2 with Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/drupal/index.html">Drupal with Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/aem.html">Adobe Experience Manager and Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/expressionEngine.html">Expression Engine and Varnish</a></li>
<li class="toctree-l1"><a class="reference internal" href="../content/tutorials/sitecoreCMS.html">Sitecore CMS and Varnish</a></li>
</ul>

    </div>
  </div>
</div>
<!---          </div>
        </div> --->
      </div>
    </div>
</div>
<div class="sidebar-block">
  <div class="sidebar-wrapper">
    <div id="main-search">
      <form class="form-inline" action="../search.html" method="GET" role="form">
        <div class="input-group">
          <input name="q" type="text" class="form-control" placeholder="Search...">
        </div>
        <input type="hidden" name="check_keywords" value="yes" />
        <input type="hidden" name="area" value="default" />
      </form>
    </div>
  </div>
</div>
  <div class="sidebar-block">
    <div class="sidebar-wrapper">
      <h4>&nbsp;&nbsp;Contribute</h4>
      <ul class="this-page-menu">
        <li><a href="../_sources/start/httpcaching_basics.txt"
               rel="nofollow">Show Source</a></li>
        <li><a href="https://github.com/huayra/wiki_varnish/blob/master/source/start/httpcaching_basics.rst"
               rel="nofollow">Show on GitHub</a></li>
        <li><a href="https://github.com/huayra/wiki_varnish/edit/master/source/start/httpcaching_basics.rst"
               rel="nofollow">Edit on GitHub</a></li>
      </ul>
    </div>
  </div>
        </div>
      </div>
    <div class="col-md-9 content">
      
  <div class="section" id="basic-http-caching">
<span id="http-caching"></span><h1>Basic HTTP Caching<a class="headerlink" href="#basic-http-caching" title="Permalink to this headline">¶</a></h1>
<p>The need to understand HTTP caching is a necessity because in today&#8217;s world,
installing and configuring Varnish doesn&#8217;t solve all your caching problems.
So this involves a little understanding on Web Caching.</p>
<p>Every Web service has it&#8217;s own requirements on what to cache and what not to cache.
Further down, you will find a checklist for varnish caching.</p>
<p>As you get to know varnish better you will see that as a web caching system Varnish
serves as a <strong>proxy cache</strong> as well as a <strong>reverse proxy cache</strong>.</p>
<p>Two main reasons why you might be considering using caching:
- To reduce network traffic load on servers
- To reduce response time to users (making your service look fast)</p>
<div class="section" id="caching-terminologies">
<h2>Caching Terminologies<a class="headerlink" href="#caching-terminologies" title="Permalink to this headline">¶</a></h2>
<p><strong>Caching Manager:</strong> It is the integration resource that manages the caching
components.</p>
<p><strong>Origin Server:</strong> That is where the <em>original</em> content lies. It serves like a
<em>backup</em> for the cache as in, it serves content when the cache doesn&#8217;t have the
relevant content and requests the origin server for the content.</p>
<p><strong>Cache hit ratio:</strong> This is a measurement of the ratio of requests that were met
through the cache against the total number of requests.</p>
<p>So a <em>high cache hit ratio</em> means most of the contents were fetched from the cache.
And a <em>cache miss</em> means the content could not be fetched from cache.</p>
<p><strong>Freshness of data:</strong> Freshness of data is used to judge whether an object in
cache is still fresh enough to serve a client.</p>
<p><strong>Stale Content:</strong> Stale Content is judged based on how old the data is. In
general all objects in cache have a time to leave value and once that expires,
it is stale content.</p>
<p><strong>Validation:</strong> Validation is checking whether the <em>stale data</em> in the cache is
&#8220;fresh&#8221; in comparison with the origin server content. If it is the same, then
the ttl value of the stale or almost expired object is increased.</p>
<p><strong>Invalidation:</strong> Invalidation of objects as the name suggests just the opposite
of Validating objects. It does the same check and deletes objects that are <em>stale</em></p>
</div>
<div class="section" id="what-is-web-caching">
<h2>What is Web Caching?<a class="headerlink" href="#what-is-web-caching" title="Permalink to this headline">¶</a></h2>
<p>Caching on the web is based on HTTP protocol. The goal of web caching is to
provide a balance between web traffic and web performance by caching relevant
data based on client demands.</p>
<p><strong>Common Caching Steps</strong></p>
<ol class="arabic">
<li><p class="first">A request is sent with a header to the server.</p>
</li>
<li><p class="first">The response’s header tells whether to cache or not.</p>
</li>
<li><p class="first">If the request is authenticated or secure, it won’t be cached by shared caches.</p>
</li>
<li><dl class="first docutils">
<dt>An object is considered fresh if:</dt>
<dd><ul class="first last simple">
<li>it has a ttl value that is valid OR</li>
<li>it is an object which is infrequently changed</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>If the object is stale:</dt>
<dd><ul class="first last simple">
<li>the origin server will be asked to validate it OR</li>
<li>the origin server will have to inform cache whether the copy is fresh enough.</li>
</ul>
</dd>
</dl>
</li>
<li><dl class="first docutils">
<dt>When the network is down, the cache can serve stale responses without checking</dt>
<dd><p class="first last">with the origin server.</p>
</dd>
</dl>
</li>
</ol>
<p><strong>Pros of Caching</strong></p>
<p>Caching is found on almost every level of a packet&#8217;s journey from one host to the
other. The most re-known advantage of caching is known to be high performance via
use of proxy servers.</p>
<ul class="simple">
<li>A quality analysis of web access helps improves client demands and caching</li>
<li>Caching offers significantly high speed on web</li>
<li>Reduces overhead costs on servers and use of bandwidth</li>
<li>Fast access to cached (most visited) resources, by faster reloads and delivery</li>
<li>Proxy servers help improve protocol translation (different browsers and devices)</li>
</ul>
<p><strong>Cons of Caching</strong></p>
<p>Caching can lead to consequences if not properly considered.</p>
<ul class="simple">
<li>Confusing and displaying wrong user information (very risky! eg. subscription emails displaying all client emails)</li>
<li>Delivering Stale objects (eg. old news even when there is an update in the database)</li>
<li>Slow performance if object not in cache</li>
<li>Caching logs contain user specific information (user privacy violated)</li>
</ul>
<p>Therefore when making cache decisions please take all your company policies in
consideration.</p>
</div>
<div class="section" id="defining-cache-control-policy">
<h2>Defining Cache-control Policy<a class="headerlink" href="#defining-cache-control-policy" title="Permalink to this headline">¶</a></h2>
<p>To define an optimal Cache control policy, there are somethings to consider.</p>
<p>Is the <em>response</em> from the server <em>reusable</em> ?</p>
<p>If it is <em>reusable</em>, Can it be <em>revalidated</em> ?
If it is not <em>re-usable</em>, <strong>Do not store it!</strong></p>
<p>If it can be <em>revalidated</em>, <strong>Do not cache it!</strong>
If it <em>cannot be revalidated</em> , can it be <em>cached by immediate caches</em> ?</p>
<p>If it can be <em>cached immediately</em>, it can either be <em>public info</em> or <em>user private private data</em>.</p>
<p>Decide which private and public info should be cached.
Next things to decide is:</p>
<ul class="simple">
<li>maximum cache lifetime</li>
<li>maximum age</li>
<li>Add Etag header</li>
</ul>
</div>
<div class="section" id="cache-related-headers">
<h2>Cache Related Headers<a class="headerlink" href="#cache-related-headers" title="Permalink to this headline">¶</a></h2>
<p>HTTP has a whole list of headers dedicated to Cache Invalidation and Page Caching.
The ones that need the most attention are:
- Expires
- Cache Control
- Etag
- Last-Modified
- If-Modified-Since
- If.None.Match
- Vary
- Age</p>
<table border="1" class="docutils" id="cache-arg">
<caption><span class="caption-text"><strong>HTTP Header Availability</strong></span><a class="headerlink" href="#cache-arg" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="40%" />
<col width="30%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">&nbsp;</th>
<th class="head">&nbsp;</th>
<th class="head">&nbsp;</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>Header</td>
<td>Request</td>
<td>	Response</td>
</tr>
<tr class="row-odd"><td>Expires</td>
<td>	 	X</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Cache-Control</td>
<td>	X</td>
<td>	X</td>
</tr>
<tr class="row-odd"><td>Last-Modified</td>
<td>	X</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>If-Modified-Since</td>
<td>	X</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>If-None-Match</td>
<td>	X</td>
<td>&nbsp;</td>
</tr>
<tr class="row-even"><td>Etag</td>
<td>	 	X</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Pragma</td>
<td>	X</td>
<td>	X</td>
</tr>
<tr class="row-even"><td>Vary</td>
<td>	 	X</td>
<td>&nbsp;</td>
</tr>
<tr class="row-odd"><td>Age</td>
<td>	 	X</td>
<td>&nbsp;</td>
</tr>
</tbody>
</table>
<p><strong>Expires</strong></p>
<p>The syntax for this header is:</p>
<blockquote>
<div>Expires: GMT formatted date</div></blockquote>
<ul class="simple">
<li>It sets a time for when the object will expire.</li>
<li>After this time it is considered stale.</li>
<li>Usually a time frame of 1 year is enough.</li>
<li>In this time frame the resource can be updated.</li>
</ul>
<p><strong>Cache-Control</strong></p>
<p>Example of a Cache-Control header:</p>
<blockquote>
<div>Cache-Control: public, must-revalidate, max-age=2592000</div></blockquote>
<p>The Cache-Control header is where the caching policy is defined.
it is both a <em>request and a *response</em> header.
This policy directs which responses to cache and which not based
on the conditions in its policy. It accepts a number of arguments
as listed below:</p>
<ul class="simple">
<li><strong>public:</strong> response can be cached by any cache</li>
<li><strong>No-store:</strong> response must not be stored by any cache mechanism</li>
<li><strong>No-cache:</strong> response is authorized to be stored but may not be reused without validation</li>
<li><strong>max-age:</strong> time in seconds when the object in cache is fresh</li>
<li><strong>s-maxage:</strong> like <em>max-age</em> but only used in public caches</li>
<li><strong>must-revalidate:</strong> indicates that the object maybe stale and should be revalidated first</li>
</ul>
<p>Below is a table from the Varnish Book showing the arguments used by the Cache-control
header:</p>
<table border="1" class="docutils" id="cache-control">
<caption><span class="caption-text"><strong>Cache Control header Arguments</strong></span><a class="headerlink" href="#cache-control" title="Permalink to this table">¶</a></caption>
<colgroup>
<col width="40%" />
<col width="30%" />
<col width="30%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">Argument</th>
<th class="head">Request</th>
<th class="head">Response</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>no-cache</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-odd"><td>no-store</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-even"><td>max-age</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-odd"><td>s-maxage</td>
<td></td>
<td>X</td>
</tr>
<tr class="row-even"><td>max-stale</td>
<td>X</td>
<td></td>
</tr>
<tr class="row-odd"><td>min-fresh</td>
<td>X</td>
<td></td>
</tr>
<tr class="row-even"><td>no-transform</td>
<td>X</td>
<td>X</td>
</tr>
<tr class="row-odd"><td>only-if-cached</td>
<td>X</td>
<td></td>
</tr>
<tr class="row-even"><td>public</td>
<td></td>
<td>X</td>
</tr>
<tr class="row-odd"><td>private</td>
<td></td>
<td>X</td>
</tr>
<tr class="row-even"><td>must-revalidate</td>
<td></td>
<td>X</td>
</tr>
<tr class="row-odd"><td>proxy-revalidate</td>
<td></td>
<td>X</td>
</tr>
</tbody>
</table>
<p><strong>Etag</strong></p>
<p>Example of an Etag header:</p>
<blockquote>
<div>Etag: &#8220;1edec-3e3073913b100&#8221;</div></blockquote>
<p>The Etag response header provides the current value of the entity tag for the
requested variant. It provides a unique value for a resource&#8217;s cotnent</p>
<p><strong>Last-Modified</strong></p>
<p>Example of a Last-Modified header:</p>
<blockquote>
<div>Last-Modified: Wed, 01 Sep 2004 13:24:52 GMT</div></blockquote>
<p>This <strong>response header</strong> indicates the date and time at which the origin server believes the
variant was last modified.</p>
<p>used in conjunction with:
- If-Modified-Since
- If-None-Match</p>
<p><strong>If-Modified-Since</strong></p>
<p>Example of an If-Modified-Since header:</p>
<blockquote>
<div>If-Modified-Since: Wed, 01 Sep 2004 13:24:52 GMT</div></blockquote>
<p>This <strong>request header</strong> is used with a method to make it conditional:</p>
<ul class="simple">
<li><strong>if</strong> the requested variant has not been modified since the time specified in this field, an entity will not be returned from the server;</li>
<li><strong>instead</strong>, a 304 (not modified) response will be returned without any message-body.</li>
</ul>
<p><strong>If-None-Match</strong></p>
<p>Example of an If-None-Match header :</p>
<blockquote>
<div>If-None-Match: &#8220;1edec-3e3073913b100&#8221;</div></blockquote>
<p>The If-None-Match <strong>request header</strong> field is used with a method to make it
conditional. The purpose of this feature is to allow efficient updates of cached
information with a minimum amount of transaction overhead.</p>
<p><strong>Vary</strong></p>
<p>The Vary response header indicates the response returned by the origin server
- may vary depending on headers received in the request.
- The most common usage of Vary is to use</p>
<blockquote>
<div><p>Vary: Accept-Encoding</p>
<p>which tells cache (Varnish included) that the content might look different
depending on the Accept-Encoding-header the client sends.</p>
</div></blockquote>
<p><strong>Age</strong></p>
<ul class="simple">
<li>A cache server can send an additional response header, Age, to indicate the age of the response.</li>
<li>Varnish (and other caches) does this.</li>
<li>Browsers (and Varnish) will use the Age-header to determine how long to cache.</li>
<li>E.g: for a max-age-based equation: cache duration = max-age - Age</li>
<li>If you allow Varnish to cache for a long time, the Age-header could effectively disallow client-side caches.</li>
</ul>
<div class="section" id="cache-hit-and-misses">
<h3>Cache-hit and misses<a class="headerlink" href="#cache-hit-and-misses" title="Permalink to this headline">¶</a></h3>
<p><strong>Cache-hit</strong></p>
<p>There is a cache-hit when Varnish returns a page from its cache instead of
forwarding the request to the origin server.</p>
<a class="reference internal image-reference" href="../_images/httpcachehit.png"><img alt="Sphinx Neo-Hittite" class="align-center" src="../_images/httpcachehit.png" style="width: 400px;" /></a>
<p><strong>Cache-miss</strong></p>
<p>There is a cache-miss when Varnish has to forward the request to the origin
server so the page can be serviced.</p>
<a class="reference internal image-reference" href="../_images/httpcachemiss.png"><img alt="Sphinx Neo-Hittite" class="align-center" src="../_images/httpcachemiss.png" style="width: 400px;" /></a>
</div>
</div>
<div class="section" id="impact-of-cache-related-headers-on-caching">
<h2>Impact of Cache Related headers on Caching<a class="headerlink" href="#impact-of-cache-related-headers-on-caching" title="Permalink to this headline">¶</a></h2>
<p>How cache related headers impact the caching policy.</p>
<p><strong>no-cache:</strong>
Any cached content must be re-validated on each request before being served</p>
<p><strong>No-store</strong>
This instruction indicates that the content cannot be cached in anyway</p>
<p><strong>public</strong>
marks eh content public, which means that it can be cached by the browser and
any intermediate caches.</p>
<p><strong>private</strong>
- This marks the content as private.
- Private content may be stored by the user&#8217;s browser, but must not be cached
by any intermediate parties. Only used for specific data.</p>
<p><strong>max-age</strong>
Sets the maximum age that the content may be cached before it
must be revalidate from the origin server.</p>
<p><strong>s-maxage</strong>
This is very similar to the max-age setting, indicates the time that content can
be cached.</p>
<p><strong>must-revaldiate</strong>
Stale contents shouldnot served to user unless the server is down.
This indicates that the values set in max-age, s-maxage or the Expires is how
long the obejct will be fresh and after the expiration it should be revalidated
at all costs.</p>
<p><strong>proxy-revalidate</strong>
this is the same as <em>must-validate</em> but applies only to intermediate proxies.</p>
<p><strong>no-transform</strong>
This informs the cache that this header should not be modified at all.</p>
</div>
<div class="section" id="your-caching-checklist">
<h2>Your Caching Checklist<a class="headerlink" href="#your-caching-checklist" title="Permalink to this headline">¶</a></h2>
<p>What to cache and what not?</p>
<p><strong>Cache Friendly Contents</strong></p>
<p>Contents that do not change frequently.</p>
<ul class="simple">
<li>Style Sheets, CSS, Some unchanged HTML theme codes</li>
<li>AJAX and JavaScript files</li>
<li>Media Files and download contents</li>
<li>Specific Brandings, Logos, Images that don&#8217;t change</li>
</ul>
<p><strong>Cache Unfriendly Contents</strong></p>
<p>Contents that should <strong>never</strong> be cached!</p>
<ul class="simple">
<li>Any kind of personal Information, such as logins, authentications etc.</li>
<li>Any kind of sensitive data</li>
<li>Any user specific contents</li>
</ul>
<p><strong>Cache or Not</strong></p>
<p>Contents that need analyzing before deciding on Caching</p>
<ul class="simple">
<li>Cookies</li>
<li>Frequently changing stylings such as images, JavaScripts and CSS</li>
</ul>
</div>
</div>


    </div>
      
  </div>
</div>
<footer class="footer">
  <div class="container">
    <p class="pull-right">
      <a href="#">Back to top</a>
      
    </p>
    <p>
        &copy; Copyright 2016, Varnish Software Group.<br/>
      Created using <a href="http://sphinx-doc.org/">Sphinx</a> 1.4.5.<br/>
    </p>
  </div>
</footer>
  </body>
</html>